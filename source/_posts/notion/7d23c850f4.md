---
title: 「Notion」利用Notion API将Notion文章整合到本地Hexo项目
urlname: 7d23c850f4
date: '2022-09-09 19:14:00 +0800'
tags:
  - Notion
categories:
  - Notion-API
cover:
---

因为我的 Hexo 博客是拉取我在语雀上的文章还有本地写的文章，所以没有直接采用相关的 Notion 部署成 Blog 的已有 API。

还是使用将文章拉取到本地再手动部署的方式。

> 参考：[yuque-hexo](https://github.com/x-cold/yuque-hexo)

## **为 Notion API 设置访问令牌**

需要设置一个 Integration（集成），通过 Notion API 连接访问自己的数据库，然后生成一个访问令牌来访问 Notion 的 API。

在[Notion API 文档](https://link.juejin.cn/?target=https%3A%2F%2Fdevelopers.notion.com%2Freference%2Fintro)页面，点击右上角的**View my integrations** 链接。点击**+ New integration**按钮。

![](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/2bb30cbc-78cb-4d91-8c36-8be0e27f8b51/%E6%88%AA%E5%B1%8F2022-09-10_20.16.22.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230108%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20230108T092049Z&X-Amz-Expires=3600&X-Amz-Signature=76ca4535178e4929e63a41a1e849e3ccb2a0feac4c8d6a338dcafe926693def8&X-Amz-SignedHeaders=host&x-id=GetObject)

创建集成完毕后，将会在详情页看到自己的访问令牌：

![](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/ed161fa3-02ac-4d02-a177-48e4cf266616/%E6%88%AA%E5%B1%8F2022-09-10_20.17.28.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230108%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20230108T092049Z&X-Amz-Expires=3600&X-Amz-Signature=5a93f5fc2c532acc63492bf0571c75245eee76c358f3056983554520f77d7e5f&X-Amz-SignedHeaders=host&x-id=GetObject)

## 在 Notion 内创建你的博客表格

![](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/feee6e5f-9285-4fb0-8ec3-220f05122fa8/%E6%88%AA%E5%B1%8F2022-09-10_20.20.05.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230108%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20230108T092049Z&X-Amz-Expires=3600&X-Amz-Signature=9b0fbd7b0531fccf0a7da5a2b379417188f5b1dec28e0e3cddf770ff72a579df&X-Amz-SignedHeaders=host&x-id=GetObject)

我创建了一个 Blog 表格，并为每个文章设置了`title`，`slug(urlname)`，`tags`，`categories`，`description`，`publish`，`created_at`和`updated_at`这几个字断。

其中`slug`是直接截取了 id 的一部分作为 url name：

![](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/4966ec9a-06ff-416c-8724-d9526f0d186b/%E6%88%AA%E5%B1%8F2022-09-10_20.23.53.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230108%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20230108T092049Z&X-Amz-Expires=3600&X-Amz-Signature=ebda3f17307d50865f2d59a62c1770c08391a5d53db9b1418457685adbd0a6f6&X-Amz-SignedHeaders=host&x-id=GetObject)

点击 Blog 页面右上角的**···**按钮，在`Connections`内选择我们刚刚创建的**my-blog**集成。

事先拥有一个  [hexo](https://github.com/hexojs/hexo)项目，并在  `package.json`中配置相关信息：

```json
"notionConfig": {
    "mdNameFormat": "slug",
    "baseUrl": "https://api.notion.com/v1/databases/",
    "token": "your Internal Integration Token",
    "database": "a664095e020e48658a11c11a897ebe0a",
    "postPath": "source/_posts/notion"
},
```
